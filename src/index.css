@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@import "katex/dist/katex.min.css";
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply scroll-smooth;
  }

  :root {
    /* Modern Light Theme (Default) - Notion/Linear Style */
    --surface: #ffffff;           /* Main background */
    --surface-contrast: #f9fafb;  /* Sidebar/Panels (Gray 50) */
    --panel: #ffffff;             /* Cards */
    --panel-accent: #f3f4f6;      /* Hover states (Gray 100) */
    --border: #e5e7eb;            /* Subtle borders (Gray 200) */
    
    --text-primary: #111827;      /* Gray 900 */
    --text-secondary: #4b5563;    /* Gray 600 */
    --text-muted: #9ca3af;        /* Gray 400 */
    
    --input-bg: #ffffff;
    --input-border: #e2e8f0;
    
    --accent: #2563eb;            /* Blue 600 */
    --accent-glow: rgba(37, 99, 235, 0.1);
    
    --danger: #ef4444;
    --danger-soft: #fee2e2;
  }

  /* Dark Theme Overrides (Optional support, but prioritized for Light) */
  html.dark {
    color-scheme: dark;
    --surface: #0a0a0a;
    --surface-contrast: #171717;
    --panel: #171717;
    --panel-accent: #262626;
    --border: #262626;
    
    --text-primary: #f9fafb;
    --text-secondary: #a1a1aa;
    --text-muted: #52525b;
    
    --input-bg: #171717;
    --input-border: #262626;
    
    --accent: #3b82f6;
    --accent-glow: rgba(59, 130, 246, 0.15);
  }

  body {
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: var(--surface);
    color: var(--text-primary);
    @apply antialiased transition-colors duration-200;
  }

  /* Custom Selection Color */
  ::selection {
    @apply bg-blue-100 text-blue-900 dark:bg-blue-900/30 dark:text-blue-100;
  }
}

@layer components {
  /* Modern Card Style */
  .card-base {
    @apply bg-[color:var(--panel)] border border-[color:var(--border)] rounded-xl transition-all duration-200;
  }
  
  .card-hover {
    @apply hover:border-gray-300 hover:shadow-sm dark:hover:border-neutral-700;
  }

  /* Inputs */
  .input-modern {
    @apply w-full rounded-lg border border-[color:var(--input-border)] bg-[color:var(--input-bg)] px-3 py-2 
           text-[color:var(--text-primary)] placeholder-[color:var(--text-muted)]
           focus:border-[color:var(--accent)] focus:outline-none focus:ring-2 focus:ring-[color:var(--accent-glow)]
           transition-all duration-200;
  }

  /* Buttons */
  .btn-ghost {
    @apply flex items-center justify-center gap-2 rounded-lg px-3 py-2 text-sm font-medium
           text-[color:var(--text-secondary)] transition-colors
           hover:bg-[color:var(--panel-accent)] hover:text-[color:var(--text-primary)];
  }

  .btn-primary {
    @apply flex items-center justify-center gap-2 rounded-lg bg-[color:var(--accent)] px-4 py-2 text-sm font-medium
           text-white shadow-sm transition-all hover:opacity-90 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Message Bubbles */
  .message-shell {
    @apply relative flex w-full flex-col gap-1 rounded-2xl px-5 py-4 text-base leading-relaxed md:max-w-3xl;
  }

  .message-shell.user {
    @apply bg-[color:var(--panel-accent)] text-[color:var(--text-primary)];
  }

  .message-shell.ai {
    @apply bg-transparent text-[color:var(--text-primary)];
  }
  
  /* Sidebar Item */
  .nav-item {
    @apply flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium text-[color:var(--text-secondary)]
           transition-all duration-200 hover:bg-[color:var(--panel-accent)] hover:text-[color:var(--text-primary)];
  }
  
  .nav-item.active {
    @apply bg-white shadow-sm text-[color:var(--text-primary)] font-semibold border border-[color:var(--border)]
           dark:bg-neutral-800 dark:border-neutral-700;
  }
}

@layer utilities {
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Typography for Markdown */
  .prose {
    @apply max-w-none text-[color:var(--text-primary)];
  }
  
  .prose p {
    @apply my-1.5 leading-7;
  }
  
  .prose h1, .prose h2, .prose h3 {
    @apply font-semibold text-[color:var(--text-primary)] mt-6 mb-3;
  }
  
  .prose ul, .prose ol {
    @apply pl-4 my-2;
  }

  .prose code {
    @apply rounded-md bg-[color:var(--panel-accent)] px-1.5 py-0.5 text-[0.85em] font-medium text-[color:var(--text-primary)] border border-[color:var(--border)];
  }

  .prose pre {
    @apply my-4 overflow-x-auto rounded-xl border border-[color:var(--border)] bg-[color:var(--surface-contrast)] p-4 text-sm;
  }
  
  .prose a {
    @apply text-[color:var(--accent)] hover:underline font-medium;
  }
}
